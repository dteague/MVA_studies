
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BDT Maker &#8212; MVA_studies  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Running the code" href="running.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="bdt-maker">
<h1>BDT Maker<a class="headerlink" href="#bdt-maker" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="Utilities.MvaMaker.XGBoostMaker">
<em class="property">class </em><code class="sig-prename descclassname">Utilities.MvaMaker.</code><code class="sig-name descname">XGBoostMaker</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">use_vars</span></em>, <em class="sig-param"><span class="n">spec_vars</span></em>, <em class="sig-param"><span class="n">cuts</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MvaMaker.html#XGBoostMaker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MvaMaker.XGBoostMaker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for XGBoost training. Takes an uproot input, a list of
groups to do a multiclass training, as well as a cut string if
needed and trains the data. After it is done, the results can be
outputed to be piped into MVAPlotter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>split_ratio</strong> (<em>float</em>) – Ratio of test events for train test splitting</p></li>
<li><p><strong>group_names</strong> (<em>list</em>) – List of the names of the different groups</p></li>
<li><p><strong>pred_train</strong> (<em>dict</em>) – Dictionary of group name to BDT associated with it for train set</p></li>
<li><p><strong>pred_test</strong> (<em>dict</em>) – Dictionary of group name to BDT associated with it for test set</p></li>
<li><p><strong>train_set</strong> (<em>pandas.DataFrame</em>) – DataFrame of the training events</p></li>
<li><p><strong>test_set</strong> (<em>pandas.DataFrame</em>) – DataFrame of the testing events</p></li>
<li><p><strong>cuts</strong> (<em>list</em>) – List of ROOT style cuts to apply</p></li>
<li><p><strong>param</strong> (<em>dict</em>) – Variables used in the training</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="Utilities.MvaMaker.XGBoostMaker.add_group">
<code class="sig-name descname">add_group</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">group_name</span></em>, <em class="sig-param"><span class="n">sample_names</span></em>, <em class="sig-param"><span class="n">infile</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MvaMaker.html#XGBoostMaker.add_group"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MvaMaker.XGBoostMaker.add_group" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Add Information about a group to class</strong></p>
<p>This grabs all the variable information about each sample,
does some preliminary weighting and splits the data into the
test and train set (based on <cite>self.split_ratio</cite>)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>group_name</strong> (<em>string</em>) – Name of group being added</p></li>
<li><p><strong>sample_names</strong> (<em>list</em>) – List of samples in the group</p></li>
<li><p><strong>infile</strong> (<em>uproot.ROOTDirectory</em>) – Uproot file with data to be added</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MvaMaker.XGBoostMaker.output">
<code class="sig-name descname">output</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">outname</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MvaMaker.html#XGBoostMaker.output"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MvaMaker.XGBoostMaker.output" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for write out commands</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>outname</strong> – Directory where files will be written</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MvaMaker.XGBoostMaker.train">
<code class="sig-name descname">train</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MvaMaker.html#XGBoostMaker.train"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MvaMaker.XGBoostMaker.train" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Train for multiclass BDT</strong></p>
<p>Does final weighting of the data (normalize all groups total
weight to the same value), train the BDT, and fill the
predictions ie the BDT values for each group.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>XGBoost model that was just trained</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>xgboost.XGBClassifer</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MvaMaker.XGBoostMaker.train_single">
<code class="sig-name descname">train_single</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">groupName</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MvaMaker.html#XGBoostMaker.train_single"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MvaMaker.XGBoostMaker.train_single" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Train for multiclass BDT</strong></p>
<p>Does final weighting of the data (normalize all groups total
weight to the same value), train the BDT only against the
group specified, and fill the predictions ie the BDT values
for each group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>groupName</strong> (<em>string</em>) – Group to train against Signal</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>XGBoost model that was just trained</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>xgboost.XGBClassifer</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="mva-outputer">
<h1>MVA Outputer<a class="headerlink" href="#mva-outputer" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="Utilities.MVAPlotter.MVAPlotter">
<em class="property">class </em><code class="sig-prename descclassname">Utilities.MVAPlotter.</code><code class="sig-name descname">MVAPlotter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">workdir</span></em>, <em class="sig-param"><span class="n">groups</span></em>, <em class="sig-param"><span class="n">lumi</span><span class="o">=</span><span class="default_value">140000</span></em>, <em class="sig-param"><span class="n">is_train</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for a bunch of plotting and outputing functions</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>groups</strong> (<em>list</em>) – List of group names</p></li>
<li><p><strong>do_show</strong> (<em>bool</em>) – Bool for if matplotlib should show its graphs</p></li>
<li><p><strong>save_dir</strong> (<em>string</em>) – Directory name to save all plots</p></li>
<li><p><strong>lumi</strong> (<em>float</em>) – Luminosity (in ipb)</p></li>
<li><p><strong>color_dict</strong><strong>(</strong><strong>dict</strong> – dict): Dictionary for setting line color for groups</p></li>
<li><p><strong>work_set</strong> (<em>pandas.DataFrame</em>) – DataFrame with event/variable data</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.add_variable">
<code class="sig-name descname">add_variable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">arr</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.add_variable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.add_variable" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Add variable to MVAPlotter object</strong></p>
<p>If one needs to make a unique, composite variable, this allows
the user to add it to the DataFrame</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>string</em>) – Name of variable for the DataFrame</p></li>
<li><p><strong>arr</strong> (<em>numpy.ndarray</em>) – Array of variable values for the DataFrame</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.apply_cut">
<code class="sig-name descname">apply_cut</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cut</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.apply_cut"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.apply_cut" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Cut DataFrame using Root Style cut string</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cut</strong> (<em>string</em>) – Cut string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.apply_cut_max_bdt">
<code class="sig-name descname">apply_cut_max_bdt</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sample</span></em>, <em class="sig-param"><span class="n">is_max</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.apply_cut_max_bdt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.apply_cut_max_bdt" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Cut on which BDT is maximum</strong></p>
<p>Cut on file by only keeping the events where the BDT with the
maximum value matches the sample provided. There is a <cite>is_max</cite>
flag to allow the inverse cut</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sample</strong> (<em>string</em>) – Sample BDT that must be maximized</p></li>
<li><p><strong>is_max</strong> (<em>bool</em><em>, </em><em>optional</em>) – whether to keep only maxBDT or all BUT, defaults to True</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.approx_likelihood">
<code class="sig-name descname">approx_likelihood</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sig</span></em>, <em class="sig-param"><span class="n">bkg</span></em>, <em class="sig-param"><span class="n">var</span></em>, <em class="sig-param"><span class="n">bins</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.approx_likelihood"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.approx_likelihood" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Get Basic max Likelihood significance</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sig</strong> (<em>string</em>) – Primary group to be plotted</p></li>
<li><p><strong>bkg</strong> (<em>string</em>) – Other groups to be plotted against sig</p></li>
<li><p><strong>var</strong> (<em>string</em>) – Variable used to calculate</p></li>
<li><p><strong>bins</strong> (<em>numpy.ndarray</em>) – numpy array of bins</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The Maximum Log Likelihood approximation (without errors)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.get_fom">
<code class="sig-name descname">get_fom</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sig</span></em>, <em class="sig-param"><span class="n">bkg</span></em>, <em class="sig-param"><span class="n">var</span></em>, <em class="sig-param"><span class="n">bins</span></em>, <em class="sig-param"><span class="n">sb_denom</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">reverse</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.get_fom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.get_fom" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Return FoM histogram</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sig</strong> (<em>string</em>) – Primary group to be plotted</p></li>
<li><p><strong>bkg</strong> (<em>string</em>) – Other groups to be plotted against sig</p></li>
<li><p><strong>var</strong> (<em>string</em>) – Variable used to calculate Figure of Merit</p></li>
<li><p><strong>bins</strong> (<em>numpy.ndarray</em>) – numpy array of bins</p></li>
<li><p><strong>sb_denom</strong> (<em>bool</em><em>, </em><em>optional</em>) – If False, uses S/sqrt(B) instead of S/sqrt(S+B), defaults to True</p></li>
<li><p><strong>reverse</strong> (<em>bool</em><em>, </em><em>optional</em>) – if True, calculates FoM using LESS than not greater than, defaults to False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>rtype</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.get_hist">
<code class="sig-name descname">get_hist</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span></em>, <em class="sig-param"><span class="n">bins</span></em>, <em class="sig-param"><span class="n">groups</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.get_hist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.get_hist" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Get Histogram of variable</strong></p>
<p>Get numpy histogram of a variable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>var</strong> (<em>string</em>) – Variable to put in the histogram</p></li>
<li><p><strong>bins</strong> (<em>numpy.ndarray</em>) – numpy array of bins</p></li>
<li><p><strong>groups</strong> (<em>list</em><em>, </em><em>optional</em>) – list of groups to include, defaults to None (means all)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Numpy histogram of the variable</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple - ndarray of histogram, ndarray of bins</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.get_hist_2d">
<code class="sig-name descname">get_hist_2d</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var1</span></em>, <em class="sig-param"><span class="n">var2</span></em>, <em class="sig-param"><span class="n">bins</span></em>, <em class="sig-param"><span class="n">groups</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.get_hist_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.get_hist_2d" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Get numpy 2D histogram for 2 variables</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>var1</strong> (<em>string</em>) – Variable 1 for the x-axis</p></li>
<li><p><strong>var2</strong> (<em>string</em>) – Variable 2 for the y-axis</p></li>
<li><p><strong>bins</strong> (<em>numpy.ndarray</em>) – numpy array of bins</p></li>
<li><p><strong>groups</strong> (<em>list</em><em>, </em><em>optional</em>) – list of groups to include, defaults to None (means all)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Numpy histogram of the variable</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple - ndarray of histogram, ndarray of bins</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.get_hist_err2">
<code class="sig-name descname">get_hist_err2</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span></em>, <em class="sig-param"><span class="n">bins</span></em>, <em class="sig-param"><span class="n">groups</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.get_hist_err2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.get_hist_err2" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Get Error squared histogram for variable</strong></p>
<p>Get numpy histogram of variable squared (poisson err if sqrt)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>var</strong> (<em>string</em>) – Variable to put in the histogram</p></li>
<li><p><strong>bins</strong> (<em>numpy.ndarray</em>) – numpy array of bins</p></li>
<li><p><strong>groups</strong> (<em>list</em><em>, </em><em>optional</em>) – list of groups to include, defaults to None (means all)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Numpy histogram of the variable</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple - ndarray of histogram, ndarray of bins</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.get_hist_err2_2d">
<code class="sig-name descname">get_hist_err2_2d</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var1</span></em>, <em class="sig-param"><span class="n">var2</span></em>, <em class="sig-param"><span class="n">bins</span></em>, <em class="sig-param"><span class="n">groups</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.get_hist_err2_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.get_hist_err2_2d" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Get numpy 2d histogram for 2 variables squared</strong></p>
<p>Poisson error can be found by sqrting this histogram</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>var1</strong> (<em>string</em>) – Variable 1 for the x-axis</p></li>
<li><p><strong>var2</strong> (<em>string</em>) – Variable 2 for the y-axis</p></li>
<li><p><strong>bins</strong> (<em>numpy.ndarray</em>) – numpy array of bins</p></li>
<li><p><strong>groups</strong> (<em>list</em><em>, </em><em>optional</em>) – list of groups to include, defaults to None (means all)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Numpy histogram of the variable</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple - ndarray of histogram, ndarray of bins</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.get_sample">
<code class="sig-name descname">get_sample</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">groups</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.get_sample"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.get_sample" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Get DataFrame matching the groups</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>groups set to None (the default) means the whole
DataFrame is returned</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>groups</strong> (<em>list</em><em>, </em><em>optional</em>) – list of groups to include, defaults to None</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame including only groups specified (None means all
groups)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.get_variable">
<code class="sig-name descname">get_variable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span></em>, <em class="sig-param"><span class="n">groups</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.get_variable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.get_variable" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Get numpy array of variable</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function uses <cite>get_sample</cite> so groups=None means all groups included</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>var</strong> (<em>string</em>) – Variable returned</p></li>
<li><p><strong>groups</strong> (<em>list</em><em>, </em><em>optional</em>) – list of groups to include, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array of the variable (under the group constraint)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.make_roc">
<code class="sig-name descname">make_roc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sig</span></em>, <em class="sig-param"><span class="n">bkg</span></em>, <em class="sig-param"><span class="n">var</span></em>, <em class="sig-param"><span class="n">extra_name</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.make_roc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.make_roc" title="Permalink to this definition">¶</a></dt>
<dd><p>Make and Save ROC curve for variable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sig</strong> (<em>string</em>) – Primary group to be plotted</p></li>
<li><p><strong>bkg</strong> (<em>string</em>) – Other groups to be plotted against sig</p></li>
<li><p><strong>var</strong> (<em>string</em>) – Variable used to plot ROC curve</p></li>
<li><p><strong>extra_name</strong> (<em>string</em><em>, </em><em>optional</em>) – name to append to filename, defaults to “”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.plot_all_shapes">
<code class="sig-name descname">plot_all_shapes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span></em>, <em class="sig-param"><span class="n">bins</span></em>, <em class="sig-param"><span class="n">extra_name</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.plot_all_shapes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.plot_all_shapes" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Plot all groups (normalized to 1) to compare shapes</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>var</strong> (<em>string</em>) – Variable graphed</p></li>
<li><p><strong>bins</strong> (<em>numpy.ndarray</em>) – numpy array of bins</p></li>
<li><p><strong>extra_name</strong><strong>(</strong><strong>name</strong> – name to append to filename, defaults to “”, optional): name to append to filename, defaults to “”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.plot_fom">
<code class="sig-name descname">plot_fom</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sig</span></em>, <em class="sig-param"><span class="n">bkg</span></em>, <em class="sig-param"><span class="n">var</span></em>, <em class="sig-param"><span class="n">bins</span></em>, <em class="sig-param"><span class="n">extra_name</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">sb_denom</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">reverse</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.plot_fom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.plot_fom" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Plots Figure of Merits for variable scan</strong></p>
<p>Plot figure of merit by creating a “signal region” by only
keeping events with a value of var greater than what value is
being scanned. One can use a cut that keeps events LESS than
the cut for var using the reverse flag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sig</strong> (<em>string</em>) – Primary group to be plotted</p></li>
<li><p><strong>bkg</strong> (<em>string</em>) – Other groups to be plotted against sig</p></li>
<li><p><strong>var</strong> (<em>string</em>) – Variable graphed</p></li>
<li><p><strong>bins</strong> (<em>numpy.ndarray</em>) – numpy array of bins</p></li>
<li><p><strong>extra_name</strong> (<em>string</em><em>, </em><em>optional</em>) – name to append to filename, defaults to “”</p></li>
<li><p><strong>sb_denom</strong> (<em>bool</em><em>, </em><em>optional</em>) – If False, uses S/sqrt(B) instead of S/sqrt(S+B), defaults to True</p></li>
<li><p><strong>reverse</strong> (<em>bool</em><em>, </em><em>optional</em>) – if True, calculates FoM using LESS than not greater than, defaults to False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of (FOM, bin) for the max FOM</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.plot_fom_2d">
<code class="sig-name descname">plot_fom_2d</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sig</span></em>, <em class="sig-param"><span class="n">var1</span></em>, <em class="sig-param"><span class="n">var2</span></em>, <em class="sig-param"><span class="n">bins1</span></em>, <em class="sig-param"><span class="n">bins2</span></em>, <em class="sig-param"><span class="n">extra_name</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.plot_fom_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.plot_fom_2d" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Plot Figure of Merit using a 2D scan</strong></p>
<p>Figure of merit is calculated by cutting on var1 and var2,
using the events with values greater than the cuts to define
the “signal region”.
Returns info on max bin and max StoB</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sig</strong> (<em>string</em>) – Group to plot in the graph</p></li>
<li><p><strong>var1</strong> (<em>string</em>) – Variable 1 for the x-axis</p></li>
<li><p><strong>var2</strong> (<em>string</em>) – Variable 2 for the y-axis</p></li>
<li><p><strong>bins1</strong> (<em>numpy.ndarray</em>) – numpy array of bins for the x-axis</p></li>
<li><p><strong>bins2</strong> (<em>numpy.ndarray</em>) – numpy array of bins for the y-axis</p></li>
<li><p><strong>extra_name</strong> (<em>string</em><em>, </em><em>optional</em>) – name to append to filename, defaults to “”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of (FOM, x value, y value) for the max FOM</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.plot_func">
<code class="sig-name descname">plot_func</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sig</span></em>, <em class="sig-param"><span class="n">bkg</span></em>, <em class="sig-param"><span class="n">var</span></em>, <em class="sig-param"><span class="n">bins</span></em>, <em class="sig-param"><span class="n">extra_name</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">scale</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.plot_func"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.plot_func" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Plot arbitrary variable</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sig</strong> (<em>string</em>) – Primary group to be plotted</p></li>
<li><p><strong>bkg</strong> (<em>string</em>) – Other groups to be plotted against sig</p></li>
<li><p><strong>var</strong> (<em>string</em>) – Variable graphed</p></li>
<li><p><strong>bins</strong> (<em>numpy.ndarray</em>) – numpy array of bins</p></li>
<li><p><strong>extra_name</strong> (<em>string</em><em>, </em><em>optional</em>) – name to append to filename, defaults to “”</p></li>
<li><p><strong>scale</strong> (<em>bool</em><em>, </em><em>optional</em>) – whether to scale sig up to bkg, defaults to True</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.plot_func_2d">
<code class="sig-name descname">plot_func_2d</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">samples</span></em>, <em class="sig-param"><span class="n">var1</span></em>, <em class="sig-param"><span class="n">var2</span></em>, <em class="sig-param"><span class="n">bins1</span></em>, <em class="sig-param"><span class="n">bins2</span></em>, <em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">lines</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.plot_func_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.plot_func_2d" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>plot 2 arbitrary variable</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This can’t plot 2 groups at once!</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>samples</strong> – type samples:</p></li>
<li><p><strong>var1</strong> (<em>string</em>) – Variable 1 for the x-axis</p></li>
<li><p><strong>var2</strong> (<em>string</em>) – Variable 2 for the y-axis</p></li>
<li><p><strong>bins1</strong> (<em>numpy.ndarray</em>) – numpy array of bins for the x-axis</p></li>
<li><p><strong>bins2</strong> (<em>numpy.ndarray</em>) – numpy array of bins for the y-axis</p></li>
<li><p><strong>name</strong> (<em>string</em>) – name used for the plot</p></li>
<li><p><strong>lines</strong> (<em>list</em>) – Coordinate for point where lines will be draw, defaults to None</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.print_info">
<code class="sig-name descname">print_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var</span></em>, <em class="sig-param"><span class="n">subgroups</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.print_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.print_info" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Print out basic statistics information for a variable</strong></p>
<p>The information for each sample in a group includes the mean,
standard deviation, kurtosis, total weighted sum, total raw
events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>var</strong> (<em>string</em>) – Variable used to print statistics</p></li>
<li><p><strong>subgroups</strong> (<em>list</em>) – list of all the samples for the information to be printed about</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.set_show">
<code class="sig-name descname">set_show</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">do_show</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.set_show"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.set_show" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Set do_show to a value</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>do_show</strong> (<em>bool</em>) – If Matplotlib show show plots</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="Utilities.MVAPlotter.MVAPlotter.write_out">
<code class="sig-name descname">write_out</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">input_tree</span></em>, <em class="sig-param"><span class="n">chan</span><span class="o">=</span><span class="default_value">'SS'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/Utilities/MVAPlotter.html#MVAPlotter.write_out"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Utilities.MVAPlotter.MVAPlotter.write_out" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Write DataFrame out to ROOT file compatible with VVPlotter</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>string</em>) – Name the ROOT file is saved as</p></li>
<li><p><strong>input_tree</strong> (<em>string</em>) – input_tree filename used for getting sumweight graphs</p></li>
<li><p><strong>chan</strong> (<em>string</em><em>, </em><em>optional</em>) – Folder plots are put into, defaults to “SS”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">MVA_studies</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="running.html">Running the code</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">BDT Maker</a></li>
<li class="toctree-l1"><a class="reference internal" href="#mva-outputer">MVA Outputer</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="running.html" title="previous chapter">Running the code</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Dylan Teague.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/code.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>